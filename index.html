<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>NZ South Island Â· Trip Journal</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#070A13;
  --card:rgba(2,6,23,.78);
  --text:#F8FAFC;
  --sub:#A1A1AA;
  --line:rgba(148,163,184,.28);
  --accent:#38BDF8;
  --warn:#F59E0B;
  --shadow:0 26px 70px rgba(0,0,0,.55);
  --r:22px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Montserrat,system-ui;
  background:#000;
  color:var(--text);
}
.wrap{max-width:1180px;margin:auto;padding:20px}

.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:var(--r);
  box-shadow:var(--shadow);
  margin-bottom:18px;
}
.pad{padding:18px}

.day{
  border:1px solid var(--line);
  border-radius:18px;
  padding:16px;
  background:rgba(15,23,42,.45);
  margin-bottom:18px;
}
.day h3{margin:0;font-size:1.05rem}
.meta{color:var(--sub);font-size:.8rem;margin:4px 0 12px}

/* å°é¢ */
.cover{
  height:220px;
  border-radius:16px;
  margin-bottom:12px;
  display:flex;
  align-items:flex-end;
  padding:14px;
  font-weight:800;
  font-size:1.15rem;
  color:white;
  box-shadow: inset 0 -80px 80px rgba(0,0,0,.55);
}

/* Stops */
.stop{
  display:flex;
  gap:10px;
  padding:10px 12px;
  border-radius:14px;
  background:rgba(2,6,23,.45);
  border:1px solid rgba(148,163,184,.18);
  margin-bottom:8px;
}
.icon{width:26px;text-align:center}
.name{flex:1}
.note{color:var(--sub);font-size:.75rem;margin-top:4px}

.nav{margin-top:6px}
a.btn{
  display:inline-block;
  text-decoration:none;
  padding:5px 10px;
  border-radius:12px;
  font-size:.75rem;
  border:1px solid var(--line);
  color:var(--text);
  background:rgba(15,23,42,.65);
}
a.btn.drive{border-color:var(--warn)}
a.btn.walk{border-color:var(--accent)}

/* æ—¶é—´çº¿ */
.details-toggle{
  margin-top:12px;
  cursor:pointer;
  font-size:.8rem;
  color:var(--accent);
}
.details{
  display:none;
  margin-top:12px;
  padding:12px 10px;
  border-radius:14px;
  background:rgba(2,6,23,.6);
  border-left:3px solid rgba(148,163,184,.4);
}
.timeline-item{
  display:grid;
  grid-template-columns:90px 1fr;
  gap:10px;
  padding:6px 0;
}
.t-time{color:#94A3B8;font-weight:600}
.t-content{padding-left:6px}

.tag-hotel{color:#60A5FA}
.tag-food{color:#F59E0B}
.tag-drive{color:#FBBF24}
.tag-shop{color:#34D399}
.tag-hike{color:#C084FC}
.tag-time{color:#EF4444;font-weight:700}

.footer{
  text-align:center;
  color:var(--sub);
  font-size:.75rem;
  margin-top:24px;
}

/* ===== Hero é«˜çº§ç”µå½±æ„Ÿ ===== */
.hero{
  position:relative;
  overflow:hidden;
}

.hero-eyebrow{
  font-size:.68rem;
  letter-spacing:.22em;
  color:#94A3B8;
  margin-bottom:8px;
}

.hero-title{
  font-size:2.0rem;
  font-weight:800;
  line-height:1.12;
  margin:0;
  background:linear-gradient(
    180deg,
    #F8FAFC 0%,
    #CBD5E1 60%,
    #94A3B8 100%
  );
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.hero-sub{
  margin-top:12px;
  font-size:1rem;
  color:#E5E7EB;
}

.hero-footnote{
  margin-top:18px;
  font-size:.72rem;
  color:#94A3B8;
}

.hero::after{
  content:"";
  position:absolute;
  right:-60px;
  top:-60px;
  width:220px;
  height:220px;
  background:radial-gradient(
    circle,
    rgba(56,189,248,.18),
    rgba(56,189,248,0) 70%
  );
  pointer-events:none;
}

/* ===== Day Headï¼ˆæ‰‹å¸ç« èŠ‚é£ï¼‰ ===== */

.day-head{
  display:flex;
  align-items:flex-start;
  gap:14px;
  margin-bottom:8px;
}

.day-index{
  font-size:.7rem;
  letter-spacing:.18em;
  color:var(--accent);
  padding-top:2px;
}

.day-main{
  line-height:1.25;
}

.day-date{
  font-size:.8rem;
  color:#94A3B8;
}

.day-place{
  font-size:1.25rem;
  font-weight:800;
  margin-top:2px;
}


</style>
</head>

<body>
<div class="wrap">

<div class="card pad hero">
  <div class="hero-eyebrow">NEW ZEALAND ROAD TRIP Â· 2026</div>

  <h1 class="hero-title">
    ä»æ²ˆé˜³å†¬å¤œåˆ°ç“¦çº³å¡æ—¥è½
  </h1>

  <div class="hero-sub">
    ä¸€åœºå±äºæˆ‘ä»¬çš„å…¬è·¯ç”µå½±
  </div>

  <div class="hero-footnote">
    è‡ªåŠ¨å°é¢ Â· æ™ºèƒ½å¯¼èˆª Â· æ‰‹å¸æ—¶é—´çº¿
  </div>
</div>


<div id="timeline"></div>

<div class="footer">NZ South Island Â· Excel â†’ JSON</div>
</div>

<script>
function cleanName(s){
  return s.replace(/ï¼ˆ.*?ï¼‰|\(.*?\)/g,"").trim();
}
function isDrive(a,b){
  const key=/Airport|Lookout|Viewpoint|Track|Lake|Mt |Mount|Glacier|Springs|Bungy|Jet/i;
  return key.test(a)||key.test(b);
}
function dirLink(a,b){
  const mode=isDrive(a,b)?"driving":"walking";
  return {
    mode,
    url:`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(cleanName(a))}&destination=${encodeURIComponent(cleanName(b))}&travelmode=${mode}`
  };
}

/* è‡ªåŠ¨å°é¢ */
function getCoverByDate(date, text){
  // â‘  æŒ‰æ—¥æœŸå¼ºåˆ¶æŒ‡å®šï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
  const byDate = {
    "2026-02-16": { t:"Christchurch", i:"images/christchurch.jpg" },
    "2026-02-17": { t:"Lake Tekapo",  i:"images/tekapo.jpg" },
    "2026-02-18": { t:"Mount Cook",   i:"images/mount_cook.jpg" },
    "2026-02-19": { t:"Wanaka",        i:"images/wanaka.jpg" },
    "2026-02-20": { t:"Queenstown",    i:"images/queenstown.jpg" },
    "2026-02-21": { t:"Glenorchy",     i:"images/glenorchy.jpg" },
    "2026-02-22": { t:"Queenstown",    i:"images/queenstown.jpg" },
    "2026-02-23": { t:"Queenstown",    i:"images/queenstown.jpg" }
  };

  if(byDate[date]) return byDate[date];

  // â‘¡ å…œåº•ï¼šå…³é”®è¯è‡ªåŠ¨åŒ¹é…ï¼ˆä½ ä¹‹å‰é‚£å¥—ï¼‰
  const list=[
    {k:/Christchurch/i, t:"Christchurch", i:"images/christchurch.jpg"},
    {k:/Tekapo/i,       t:"Lake Tekapo",  i:"images/tekapo.jpg"},
    {k:/Cook|Mount Cook|Mt Cook/i, t:"Mount Cook", i:"images/mount_cook.jpg"},
    {k:/Wanaka/i,       t:"Wanaka",        i:"images/wanaka.jpg"},
    {k:/Queenstown/i,   t:"Queenstown",    i:"images/queenstown.jpg"},
    {k:/Glenorchy/i,    t:"Glenorchy",     i:"images/glenorchy.jpg"}
  ];

  for(const c of list){
    if(c.k.test(text)) return c;
  }

  // â‘¢ æœ€ç»ˆå…œåº•
  return {
    t:"South Island",
    i:"images/default.jpg"
  };
}

/* æ—¶é—´çº¿è§£æ */
function emojiClass(line){
  if(/ğŸ¨|ğŸ›/.test(line)) return "tag-hotel";
  if(/ğŸ½|ğŸœ|â˜•|ğŸ·/.test(line)) return "tag-food";
  if(/ğŸš—|â†’/.test(line)) return "tag-drive";
  if(/ğŸ›’|ğŸ§º/.test(line)) return "tag-shop";
  if(/ğŸ¥¾|ğŸŒ„|ğŸ”/.test(line)) return "tag-hike";
  if(/â°/.test(line)) return "tag-time";
  return "";
}
function formatDateWithWeekday(dateStr){
  const d = new Date(dateStr + "T00:00:00"); // é˜²æ­¢æ—¶åŒºåç§»
  const weekdays = [
    "Sunday","Monday","Tuesday","Wednesday",
    "Thursday","Friday","Saturday"
  ];
  const wd = weekdays[d.getDay()];
  return `${wd}, ${dateStr}`;
}

function parseTimeline(text){
  return text.split("\n").map(l=>{
    const m=l.match(/^([0-9:ï¼‹+â€“\-]+)\s*[ï½œ| ]?(.*)$/);
    return m?{time:m[1],content:m[2]}:{time:"",content:l};
  });
}

/* æ¸²æŸ“ */
fetch("data.json")
.then(r=>r.json())
.then(data=>{
  const root=document.getElementById("timeline");

  data.forEach(day=>{
    const box=document.createElement("div");
    box.className="day";

const cover = getCoverByDate(
  day.date,
  day.stops.map(s=>s.place).join(" ")
);
    const coverDiv=document.createElement("div");
    coverDiv.className="cover";
    coverDiv.style.background=`url(${cover.i}) center/cover`;
    coverDiv.textContent=cover.t;
    box.appendChild(coverDiv);

// Day ç¼–å·ï¼šä» Day 2 å¼€å§‹
const dayIndex = data.indexOf(day) + 2;

box.innerHTML += `
  <div class="day-head">
    <div class="day-index">Day ${dayIndex}</div>
    <div class="day-main">
<div class="day-date">${formatDateWithWeekday(day.date)}</div>
    </div>
  </div>
  <div class="meta">${day.stops.length} Stops</div>
`;

    day.stops.forEach((s,i)=>{
      const stop=document.createElement("div");
      stop.className="stop";
      stop.innerHTML=`
        <div class="icon">ğŸ“</div>
        <div class="name">${s.place}${s.note?`<div class="note">${s.note}</div>`:""}</div>
      `;
      if(i<day.stops.length-1){
        const n=dirLink(s.place,day.stops[i+1].place);
        stop.innerHTML+=`
          <div class="nav">
            <a class="btn ${n.mode==='driving'?'drive':'walk'}" target="_blank" href="${n.url}">
              ${n.mode==='driving'?'ğŸš— Drive':'ğŸš¶ Walk'}
            </a>
          </div>`;
      }
      box.appendChild(stop);
    });

    if(day.note){
      const toggle=document.createElement("div");
      toggle.className="details-toggle";
      toggle.textContent="â–¼ æŸ¥çœ‹å½“æ—¥è¯¦ç»†è®¡åˆ’";

      const details=document.createElement("div");
      details.className="details";

      parseTimeline(day.note).forEach(it=>{
        const row=document.createElement("div");
        row.className="timeline-item";
        row.innerHTML=`
          <div class="t-time">${it.time}</div>
          <div class="t-content ${emojiClass(it.content)}">${it.content}</div>
        `;
        details.appendChild(row);
      });

      toggle.onclick=()=>{
        const open=details.style.display==="block";
        details.style.display=open?"none":"block";
        toggle.textContent=open?"â–¼ æŸ¥çœ‹å½“æ—¥è¯¦ç»†è®¡åˆ’":"â–² æ”¶èµ·è¯¦ç»†è®¡åˆ’";
      };

      box.appendChild(toggle);
      box.appendChild(details);
    }

    root.appendChild(box);
  });
});
</script>
</body>
</html>
